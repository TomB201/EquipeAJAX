{% extends "index.html" %}
{% block content %}
    <h2>Les équipes !</h2>
    <table>
    <tr>
        {% for equipe in equipes %}

            <tr>
                <td><a href="#" onclick="go('{{ equipe.nom }}')"> {{ equipe.nom }}</a></td>
                <td><button id="{{ equipe.id }}" onclick="getDetails(this.id)">Voir plus...</button></td>

            </tr>
        {% endfor %}

    </tr>

    </table>
    <br>
    <button onclick="location.href='{% url "add" %}';" class="btn btn-primary">Ajouter une équipe</button>
    <script>

      function go (nom) { // fonction de callback
    var notification = document.getElementById("notification"); // var notification
    if (!notification) { //condition si la var notification n'existe pas on la cree
      notification = document.createElement("div"); // modification du DOM ajout du noeud + cree objet notification
      notification.id = "notification";
      document.body.appendChild(notification);
    }
    notification.innerHTML = "⚽ Allez " + nom + " ⚽";
    notification.style.backgroundColor = "lightblue";
    notification.style.padding = "10px";
    notification.style.color = "black"; }


    function getDetails(id) {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (this.readyState === 4 && this.status === 200) {
                var details = JSON.parse(this.responseText);
                var detailsDiv = document.getElementById("details");
                detailsDiv.innerHTML = "<h3>" + details.nom + "</h3><p>" + details.description + "</p>";
            }
        };
        xhr.open("GET", "/equipes/details/" + id + "/");
        xhr.send();
        }


    </script>



{% endblock %}